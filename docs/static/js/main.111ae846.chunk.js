(this["webpackJsonpke-complex-modifications"]=this["webpackJsonpke-complex-modifications"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),i=n(31),r=n.n(i),a=n(161),s=n(11),l=n(186),j=n(187),d=n(180),u=n(181),b=n(183),h=n(174),x=n(188),O=n(179),f=n(166),p=n(176),m=n(159),v=n(160),g=n(51),w=n.n(g),y=n(47),C=n(32),S=n.n(C),k=n(1),E=Object(c.createContext)({open:!1,title:"",fetching:!1,jsonString:"",setOpen:function(e){},openModal:function(){var e=Object(y.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),I=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),l=a[0],j=a[1],d=Object(c.useState)(!1),u=Object(s.a)(d,2),b=u[0],h=u[1],x=Object(c.useState)(""),O=Object(s.a)(x,2),f=O[0],p=O[1];return Object(k.jsx)(E.Provider,{value:{open:o,title:l,fetching:b,jsonString:f,setOpen:i,openModal:function(){var e=Object(y.a)(S.a.mark((function e(t,n){var c,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(t),h(!0),p(""),e.prev=3,e.next=6,fetch(n);case 6:return c=e.sent,e.next=9,c.json();case 9:o=e.sent,p(JSON.stringify(o,null,2)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),p("ERROR: Failed to fetch: ".concat(n));case 17:h(!1),i(!0);case 19:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}()},children:e.children})},R=Object(c.createContext)({hash:""}),_=function(e){return Object(k.jsx)(R.Provider,{value:{hash:window.location.hash.substr(1)},children:e.children})},P=Object(c.createContext)({query:"",setQuery:function(e){}}),q=function(e){var t,n=Object(c.useState)(null!==(t=new URLSearchParams(window.location.search).get("q"))&&void 0!==t?t:""),o=Object(s.a)(n,2),i=o[0],r=o[1];return Object(k.jsx)(P.Provider,{value:{query:i,setQuery:r},children:e.children})},T=Object(c.createContext)({text:"",setText:function(e){}}),U=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1];return Object(k.jsx)(T.Provider,{value:{text:o,setText:i},children:e.children})},F=n(37),L=n(38),z=function(){return"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).replace(/\/$/,"")},A=Object(F.a)((function e(t){Object(L.a)(this,e),this.object=void 0,this.id="",this.jsonUrl="",this.anchorUrl="",this.object=t;var n=t.path;if(void 0!==n){var c=n.substring(n.lastIndexOf("/")+1);-1!==c.lastIndexOf(".")&&(c=c.substring(0,c.lastIndexOf("."))),this.id=c,this.jsonUrl="".concat(z(),"/").concat(t.path),this.anchorUrl="".concat(z(),"/#").concat(c)}})),M=Object(F.a)((function e(t){Object(L.a)(this,e),this.object=void 0,this.files=[],this.object=t,void 0!==t.files&&(this.files=t.files.map((function(e){return new A(e)})))})),J=n(41),N=n(6),D=n(165),K=n(178),Q=n(173),B=n(182),G=n(150),H=n(154),W=n(81),Y=n(175),$=n(162),V=n(147),X=n(177),Z=n(148),ee=n(168),te=n(169),ne=n(145),ce=n(151),oe=n(152),ie=n(153),re=function(e){var t=e.jsonFile,n=Object(c.useContext)(E),o=Object(c.useContext)(T),i=Object(c.useState)(!1),r=Object(s.a)(i,2),a=r[0],l=r[1],j=Object(c.useRef)(null),d=function(e){j.current&&j.current.contains(e.target)||l(!1)},u=function(){var e=encodeURIComponent(t.jsonUrl);window.location.href="karabiner://karabiner/assets/complex_modifications/import?url=".concat(e)},b=function(e){void 0!==navigator.clipboard?(navigator.clipboard.writeText(e),o.setText("You just copied: ".concat(e))):o.setText("ERROR: Failed to copy: ".concat(e))},h=function(){var e=Object(y.a)(S.a.mark((function e(){var n,c,i,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.jsonUrl);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,i=window.btoa(unescape(encodeURIComponent(JSON.stringify(c)))),r="https://genesy.github.io/karabiner-complex-rules-generator/#".concat(i),window.open(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),o.setText("ERROR: Failed to open editor");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(Y.a,{variant:"contained",ref:j,children:[Object(k.jsx)(p.a,{size:"small",sx:{textTransform:"none"},onClick:function(e){e.stopPropagation(),u()},children:"Import"}),Object(k.jsx)(p.a,{size:"small",onClick:function(e){e.stopPropagation(),l((function(e){return!e}))},children:Object(k.jsx)(ne.a,{})})]}),Object(k.jsx)($.a,{open:a,anchorEl:j.current,transition:!0,style:{zIndex:910},children:function(e){var c=e.TransitionProps,o=e.placement;return Object(k.jsx)(V.a,Object(J.a)(Object(J.a)({},c),{},{style:{transformOrigin:"bottom"===o?"center top":"center bottom"},children:Object(k.jsx)(X.a,{children:Object(k.jsx)(Z.a,{onClickAway:d,children:Object(k.jsxs)(ee.a,{id:"split-button-menu",children:[Object(k.jsx)(te.a,{onClick:function(e){e.stopPropagation(),u(),d(e.nativeEvent)},children:"Import to Karabiner-Elements"}),Object(k.jsx)(G.a,{}),Object(k.jsxs)(te.a,{onClick:function(e){var c,o;e.stopPropagation(),n.openModal(null!==(c=null===(o=t.object.json)||void 0===o?void 0:o.title)&&void 0!==c?c:"",t.jsonUrl),d(e.nativeEvent)},children:[Object(k.jsx)(ce.a,{sx:{marginRight:1}}),Object(k.jsx)("small",{children:"Show JSON"})]}),Object(k.jsxs)(te.a,{onClick:function(e){e.stopPropagation(),b(t.anchorUrl),d(e.nativeEvent)},children:[Object(k.jsx)(oe.a,{sx:{marginRight:1}}),"Copy URL"]}),Object(k.jsxs)(te.a,{onClick:function(e){e.stopPropagation(),b(t.jsonUrl),d(e.nativeEvent)},children:[Object(k.jsx)(oe.a,{sx:{marginRight:1}}),"Copy JSON URL"]}),Object(k.jsxs)(te.a,{onClick:function(e){e.stopPropagation(),h(),d(e.nativeEvent)},children:[Object(k.jsx)(ie.a,{sx:{marginRight:1}}),"Edit JSON (Open external site)"]})]})})})}))}})]})},ae="#28A745",se=Object(N.a)((function(e){return Object(k.jsx)(D.a,Object(J.a)({disableGutters:!0,elevation:0,square:!0},e))}))((function(e){e.theme;return{border:"1px solid ".concat(ae),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),le=Object(N.a)((function(e){return Object(k.jsx)(K.a,Object(J.a)({expandIcon:Object(k.jsx)(H.a,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){return{backgroundColor:"white",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:e.theme.spacing(1),alignItems:"center"}}})),je=function(e){var t=e.category,n=Object(c.useContext)(R);return Object(k.jsxs)(O.a,{sx:{border:"1px solid ".concat(ae)},children:[Object(k.jsx)(O.a,{sx:{p:2,color:"white",backgroundColor:ae,position:"sticky",top:0,zIndex:900},children:t.object.name}),t.files.map((function(e){var c,o,i,r,a;if(""===n.hash||n.hash===e.id||n.hash===t.object.id)return Object(k.jsxs)(se,{id:e.id,TransitionProps:{unmountOnExit:!0},children:[Object(k.jsxs)(le,{children:[null===(c=e.object.json)||void 0===c?void 0:c.title,Object(k.jsxs)(O.a,{sx:{ml:"auto"},children:[(null===(o=e.object.json)||void 0===o?void 0:o.maintainers)&&(null===(i=e.object.json)||void 0===i?void 0:i.maintainers.map((function(t){return Object(k.jsx)(Q.a,{label:Object(k.jsxs)(k.Fragment,{children:["Maintained by @",Object(k.jsx)(d.a,{href:"https://github.com/".concat(t),target:"_blank",onClick:function(e){return e.stopPropagation()},children:t})]}),variant:"outlined",sx:{marginRight:2}},"".concat(e.id,"-maintainers-").concat(t))}))),Object(k.jsx)(re,{jsonFile:e})]})]}),Object(k.jsx)(B.a,{children:null===(r=e.object.json)||void 0===r||null===(a=r.rules)||void 0===a?void 0:a.map((function(t,n){return Object(k.jsxs)(O.a,{children:[Object(k.jsxs)(h.a,{container:!0,direction:"row",alignItems:"center",sx:{px:2,my:1},children:[Object(k.jsx)(O.a,{children:t.description}),Object(k.jsx)(O.a,{sx:{ml:"auto"},children:t.available_since&&Object(k.jsx)(Q.a,{label:"Karabiner-Elements ".concat(t.available_since," or later"),variant:"outlined"})})]}),e.object.extra_description_path&&Object(k.jsx)(O.a,{children:Object(k.jsx)(W.a,{style:{border:0,width:"100%"},src:"".concat(z(),"/build/").concat(e.object.extra_description_path),title:e.object.extra_description_path})},"".concat(e.id,"-rules-extra-description-").concat(e.object.extra_description_path)),Object(k.jsx)(G.a,{})]},"".concat(e.id,"-rules-").concat(n))}))})]},e.id)}))]})},de=n(170),ue=n(167),be=n(184),he=n(157),xe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Oe=function(){var e=Object(c.useContext)(E),t=function(){e.setOpen(!1)};return Object(k.jsxs)(o.a.Fragment,{children:[Object(k.jsx)(de.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:e.fetching,children:Object(k.jsx)(b.a,{color:"inherit"})}),Object(k.jsx)(ue.a,{open:e.open,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(k.jsxs)(O.a,{sx:xe,children:[Object(k.jsxs)(u.a,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(k.jsxs)(O.a,{children:[" ",e.title]}),Object(k.jsx)(be.a,{onClick:t,children:Object(k.jsx)(he.a,{})})]}),Object(k.jsx)(u.a,{id:"modal-modal-description",sx:{mt:2,minHeight:"100px",maxHeight:"calc(90vh - 40px)",overflow:"auto",whiteSpace:"pre-wrap"},children:e.jsonString})]})})]})},fe=n(171),pe=n(164),me=n(185),ve=n(158),ge=function(){var e=Object(c.useContext)(P),t=Object(c.useState)(e.query),n=Object(s.a)(t,2),o=n[0],i=n[1],r=function(){e.query!==o&&(e.setQuery(o),window.history.pushState({q:o},"","?q="+encodeURIComponent(o)))};return Object(k.jsx)(O.a,{children:Object(k.jsx)(fe.a,{sx:{width:"50ch"},variant:"outlined",children:Object(k.jsx)(pe.a,{value:o,placeholder:"Search...",startAdornment:Object(k.jsx)(me.a,{position:"start",children:Object(k.jsx)(ve.a,{})}),onChange:function(e){i(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&r()},onBlur:function(){r()}})})})},we=n(172),ye=function(){var e=Object(c.useContext)(T);return Object(k.jsx)(we.a,{open:""!==e.text,autoHideDuration:3e3,onClose:function(t,n){"clickaway"!==n&&e.setText("")},message:e.text})},Ce=function(e){var t=e.categories,n="black";return Object(k.jsxs)(O.a,{sx:{border:"1px solid ".concat(n)},children:[Object(k.jsx)(O.a,{sx:{p:2,color:"white",backgroundColor:n},children:"Table of Contents"}),t.map((function(e){return Object(k.jsxs)(O.a,{children:[Object(k.jsxs)(h.a,{container:!0,direction:"row",alignItems:"center",sx:{px:2,my:1},children:[Object(k.jsx)(d.a,{href:"#".concat(e.object.id),children:e.object.name}),Object(k.jsx)(O.a,{sx:{ml:"auto"},children:Object(k.jsx)(Q.a,{label:e.files.length})})]}),Object(k.jsx)(G.a,{})]},e.object.id)}))]})},Se=function(){var e=Object(c.useContext)(R),t=Object(c.useContext)(P),n=Object(c.useState)(!1),i=Object(s.a)(n,2),r=i[0],a=i[1],g=Object(c.useState)([]),y=Object(s.a)(g,2),C=y[0],S=y[1],E=Object(c.useState)(),I=Object(s.a)(E,2),_=I[0],q=I[1],T=Object(c.useState)([]),U=Object(s.a)(T,2),F=U[0],L=U[1];return Object(c.useEffect)((function(){a(!0);var e="".concat(z(),"/build/dist.json");fetch(e).then((function(e){return e.json()})).then((function(e){S([e.index.map((function(e){return new M(e)})),e.example.map((function(e){return new M(e)}))].flat())}),(function(e){console.log(e)})).then((function(){a(!1)}))}),[]),Object(c.useEffect)((function(){void 0===_&&0!==C.length&&""!==t.query&&q(w()((function(e){e.ref("fileId"),e.field("title",{boost:2}),e.field("text"),C.forEach((function(t){t.files.forEach((function(t){var n,c,o,i,r,a,s,l="";void 0!==(null===(n=t.object.json)||void 0===n?void 0:n.maintainers)&&(null===(s=t.object.json)||void 0===s||s.maintainers.forEach((function(e){l="".concat(l," ").concat(null!==e&&void 0!==e?e:"")})));null===(c=t.object.json)||void 0===c||null===(o=c.rules)||void 0===o||o.forEach((function(e){var t;l="".concat(l," ").concat(null!==(t=e.description)&&void 0!==t?t:"")})),l="".concat(l," ").concat(null!==(i=t.object.extra_description_text)&&void 0!==i?i:""),e.add({fileId:t.id,title:null!==(r=null===(a=t.object.json)||void 0===a?void 0:a.title)&&void 0!==r?r:"",text:l.toLowerCase()})}))}))})))}),[t.query,C,_]),Object(c.useEffect)((function(){if(0!==C.length)if(""!==t.query)if(void 0===_)L([]);else{var e=[{object:{id:"__search_result__",name:"Search Result"},files:[]}];_.query((function(e){w.a.tokenizer(t.query.toLowerCase()).forEach((function(t){var n=t.toString();e.term(n,{boost:100}),e.term(n,{wildcard:w.a.Query.wildcard.LEADING|w.a.Query.wildcard.TRAILING,boost:10}),e.term(n,{editDistance:2})}))})).forEach((function(t){var n=t.ref;C.forEach((function(t){t.files.forEach((function(t){t.id===n&&e[0].files.push(t)}))}))})),L(e)}else L(C)}),[t.query,C,_]),Object(k.jsxs)(o.a.Fragment,{children:[Object(k.jsx)(l.a,{position:"static",children:Object(k.jsxs)(j.a,{children:[Object(k.jsx)(d.a,{href:"".concat(z(),"/"),color:"inherit",underline:"none",children:Object(k.jsx)(u.a,{sx:{fontWeight:"bold"},children:"Karabiner-Elements complex_modifications rules"})}),r&&Object(k.jsx)(b.a,{color:"inherit"}),Object(k.jsx)(d.a,{href:"https://github.com/pqrs-org/KE-complex_modifications",color:"inherit",target:"_blank",marginLeft:"auto",children:Object(k.jsxs)(h.a,{container:!0,direction:"row",alignItems:"center",children:[Object(k.jsx)(m.a,{sx:{mr:.5}}),"GitHub"]})})]})}),Object(k.jsxs)(x.a,{children:[""===e.hash&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(O.a,{sx:{mt:4,textAlign:"center"},children:Object(k.jsx)(ge,{})}),""===t.query&&Object(k.jsx)(O.a,{sx:{mt:4},children:Object(k.jsx)(Ce,{categories:F})})]}),""!==e.hash&&Object(k.jsx)(O.a,{sx:{mt:2},children:Object(k.jsx)(f.a,{variant:"outlined",severity:"warning",icon:!1,children:Object(k.jsxs)(O.a,{sx:{display:"flex",alignItems:"center"},children:[Object(k.jsx)(v.a,{sx:{mr:1}}),'Rules are filtered by "',Object(k.jsx)("strong",{children:e.hash}),'".',Object(k.jsx)(p.a,{variant:"contained",component:d.a,href:"".concat(z(),"/"),sx:{ml:2,textTransform:"none"},children:"Show all rules"})]})})}),F.map((function(t){if(""===e.hash||e.hash===t.object.id||void 0!==t.files.find((function(t){return e.hash===t.id})))return Object(k.jsx)(O.a,{sx:{mt:4},id:t.object.id,children:Object(k.jsx)(je,{category:t})},t.object.id)}))]}),Object(k.jsx)(Oe,{}),Object(k.jsx)(ye,{})]})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,189)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};r.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(I,{children:Object(k.jsx)(_,{children:Object(k.jsx)(q,{children:Object(k.jsxs)(U,{children:[Object(k.jsx)(a.a,{}),Object(k.jsx)(Se,{})]})})})})}),document.getElementById("root")),ke()}},[[109,1,2]]]);
//# sourceMappingURL=main.111ae846.chunk.js.map